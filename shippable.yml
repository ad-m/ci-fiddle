language: none

env:
  matrix:
    - LINUX_VERSION: ubuntu1404
    - LINUX_VERSION: ubuntu1604

build:
  ci:
    - ls -la ./docker
    - ./docker/build "${LINUX_VERSION}" "linux-cmake" "${LINUX_VERSION}"

  on_success:
    - echo "docker push"
    - ls -la ./docker
    - chmod +x ./docker/*
    - ./docker/tag_and_push "linux-cmake" "${LINUX_VERSION}" "${BRANCH}" "${GIT_TAG_NAME}" "${PULL_REQUEST}"

integrations:
  notifications:
    - integrationName: email
      type: email
      on_success: never
      on_failure: never
      on_cancel: never
      on_start: never
      on_pull_request: never
