language: none

build:
  pre_ci_boot:
    image_name: vidavidorra/linux-cmake
    image_tag: ubuntu1604-develop
    pull: true

  ci:
    - ls -la
    - pwd
    - cat ~/.bashrc
    - source ~/.bashrc
    - echo "${CMAKE_VERSIONS[@]}"
    - cmake -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -Bcmake-build-release -H./examples/regression_test
    - >
      for version in "${CMAKE_VERSIONS[@]}"; do
        echo "Testing CMake v${version}"
        echo "${CMAKE_BASE_PATH}-${version}" -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -Bcmake-build-release -H./examples/regression_test
      done;

integrations:
  notifications:
    - integrationName: email
      type: email
      recipients:
        --last_committer
        --last_author
      on_success: change
      on_failure: change
      on_cancel: never
      on_start: never
      on_pull_request: never
