language: node_js
node_js:
  - "12.8.0"

env:
  global:
    - TEST_RESULTS_DIR="$SHIPPABLE_REPO_DIR/shippable/testresults"
    - CODE_COVERAGE_DIR="${SHIPPABLE_REPO_DIR}/shippable/codecoverage"

build:
  ci:
    - npm ci
    - echo $SHIPPABLE_COMMIT_RANGE
    - echo $SHIPPABLE_COMMIT_RANGE | cut -c 1-7
    - echo $TRAVIS_BUILD_DIR
    - echo $SHIPPABLE_BUILD_DIR
    - npm run shippable:d
    - thing="$(npm run shippable:d)"
    - echo "Thing ${thing}"
    - >
      if [[ "$(./.ci/test.sh $SHIPPABLE_COMMIT_RANGE)" == "true" ]]; then
        echo "Building this part"
      else
        echo "Nothing changed..."
      fi
    - echo "Byeee"
    - npm run shippable:is-diff

integrations:
  notifications:
    - integrationName: email
      type: email
      recipients:
        - vidavidorra@gmail.com
      on_success: never
      on_failure: never
      on_cancel: never
      on_start: never
      on_pull_request: never
